function transpriceIndexInit(opts) { 
        var transPriceGrid = new MyGrid({
            renderTo: 'TransPriceGrid'
            , autoWidth: true
            , buttons: buttons0
            , height: gGridHeight/2
		    , storeURL: opts.transPriceStoreUrl
		    , sortByField: 'ID'
		    , primaryKey: 'ID'
		    , setGridPageSize: 30
		    , showPageBar: true
            , dialogWidth: 300
            , dialogHeight: 300
            , autoLoad: true 
            , toolbarRefresh:false
		    , initArray: [
                  { label: '编号', name: 'ID', index: 'ID', width: 50}
                , { name: 'TransportID', hidden: true }
                , { name: 'SupplyID', hidden: true }
                , { name: 'StuffID', hidden: true }
                , { label: '运输厂商', name: 'TransportName', index: 'TransportName' }
                , { label: '供应商', name: 'SupplyName', index: 'SupplyName' }
                , { label: '原料来源地', name: 'SourceName', index: 'SourceName' }
                , { label: '原材料', name: 'StuffName', index: 'StuffName' } 
                , { label: '默认单价', name: 'UnitPrice', index: 'UnitPrice', width:60, align:'right', formatter:'currency'}
                , { label: '计价方式', name: 'CalcType', index: 'CalcType', width: 60, formatter: dicCodeFmt, unformat: dicCodeUnFmt, formatoptions: { parentId: 'TransPriceMethod' }, hidden: true }
                , { label: '备注', name: 'Remark', index: 'Remark' }
		    ] 
            , functions: { 
                handleRefresh: function (btn) {
                    transPriceGrid.reloadGrid();
                },
                handleAdd: function (btn) { 
                    transPriceGrid.handleAdd({
                        loadFrom: 'MyFormDiv',
                        btn: btn,
                        afterFormLoaded: function () {
                           
                        }
                    });
                },
                handleEdit: function (btn) {
                    var Record = transPriceGrid.getSelectedRecord(); 
                    transPriceGrid.handleEdit({
                        loadFrom: 'MyFormDiv',
                        btn: btn,
                        prefix: "TransPrice",
                        afterFormLoaded: function () {
                            $('input[name="TransportName"]').val(Record.TransportName);
                            $('input[name="SupplyName"]').val(Record.SupplyName);
                            $('input[name="StuffName"]').val(Record.StuffName);
                        } 
                    });
                }
                , handleDelete: function (btn) {
                    transPriceGrid.deleteRecord({
                        deleteUrl: btn.data.Url
                    });
                }
            }
        });

        var myJqGridTo = new MyGrid({
            renderTo: 'myJqGridDetial',
            title: '日期价格记录',
            autoWidth: true,
            buttons: buttons1,
            height: gGridHeight/2-100,
            storeURL: opts.DelstoreUrl,
            sortByField: 'ID',
            dialogWidth: 480,
            dialogHeight: 300,
            primaryKey: 'ID',
            setGridPageSize: 30,
            showPageBar: true,
            initArray: [{
                label: 'ID',
                name: 'ID',
                index: 'ID',
                width: 80,
                hidden: true
            },
            {
                label: 'TransPriceID',
                name: 'TransPriceID',
                index: 'TransPriceID',
                width: 80,
                hidden: true
            },
		    {
		        label: '日期',
		        name: 'PriceDate',
		        index: 'PriceDate',
		        formatter: 'date',
		        width: 100
		    },
	    { label: '默认单价', name: 'UnitPrice', index: 'UnitPrice', width:60, align:'right', formatter:'currency'}  , 
		{
		    label: '备注',
		    name: 'Remark',
		    index: 'Remark',
		    width: 200
		}],
            autoLoad: false,
            functions: {
                handleReload: function (btn) {
                    myJqGridTo.reloadGrid();
                },
                handleRefresh: function (btn) {
                    myJqGridTo.refreshGrid();
                },
                handleAdd: function (btn) {
                 console.log(1111);
                    var keys = transPriceGrid.getSelectedKeys();
                    if (keys.length == 0) {
                        showMessage('提示', "请选择需要的单据!");
                        return;
                    }
                    console.log(keys);
                    var Record = transPriceGrid.getSelectedRecord(); 
                    var id = Record.ID;
                    $("#M_TransPrice_TransPriceID").val(Record.ID);
                    myJqGridTo.handleAdd({
                        loadFrom: 'MyFormDivDel',
                        btn: btn,
                        afterFormLoaded: function () {
                           
                        }
                    });
                },
                handleEdit: function (btn) {
                    myJqGridTo.handleEdit({
                        loadFrom: 'MyFormDivDel',
                        btn: btn,
                        prefix: "M_TransPrice"
                    });
                }
                , handleDelete: function (btn) {
                    myJqGridTo.deleteRecord({
                        deleteUrl: btn.data.Url
                    });
                }
            }
        });
        transPriceGrid.addListeners('rowclick',
	    function (id, record, selBool) { 
	        myJqGridTo.refreshGrid("TransPriceID=" + id);
	    });
}