@model ZLERP.Model.ViewModels.ContractAndItemsGH
@section HeaderSection{
    <script src="@Url.Content("~/Scripts/Views/ContractGH/PayIndex.js")" type="text/javascript" language="javascript"> </script>

    <script type="text/javascript">
        $(function () {
            payIndexInit({
                ContractStoreUrl: '@Url.Action("Find")',
                ContractInvoiceStoreUrl: '@Url.Action("Find","ContractInvoiceGH")',
                ContractInvoiceUpdateUrl: '@Url.Action("Update","ContractInvoiceGH")'
            });
        });
    </script>
}
<div id="buttonToolbar">
</div>
<div style="float: left; width: 69%">
    <div id="Contractid">
    </div>
    <div id="dzGrid">
    </div>
</div>
<div style="float: right; width: 30%">
    
    <div id="jstzGrid" style="display:none">
    </div>
    <div id="payGrid">
    </div>
    <div id="productGrid" style="display:none">
    </div>
    <div id="ContractItemGrid">
    </div>
    <div id="divContractInvoice">
    </div>
</div>
<div id="JSTZForm" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform">
            <tr>
                <td colspan="2">@Html.TextBoxFor(m => m.ContractJSTZ.ID, new { @class = "text", style = "display:none" })
                    @Html.LabelFor(m => m.Contract.ContractName)@Html.HiddenFor(m => m.ContractJSTZ.ContractID, new { @class = "text" })<span
                        id="ContractName_project" style="color: Red;"></span>
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractJSTZ.ChangeDate)@Html.EditorFor(m => m.ContractJSTZ.ChangeDate)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractJSTZ.JSDate)@Html.EditorFor(m => m.ContractJSTZ.JSDate)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractJSTZ.AdjustType)@Html.DicEditorFor(m => m.ContractJSTZ.AdjustType, DicEnum.ContractAccAdjust, new { width = "137px;" })
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractJSTZ.ChangeMoney)@Html.TextBoxFor(m => m.ContractJSTZ.ChangeMoney, new { @class = "text" })
                </td>
            </tr>
            <tr>
                <td colspan="2">@Html.LabelFor(m => m.ContractJSTZ.Remark)@Html.TextAreaFor(m => m.ContractJSTZ.Remark, new { @class = "text" })
                </td>
            </tr>
        </table>
    }
</div>
@*<div id="DZForm" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform">
            <tr>
                <td colspan="2">@Html.HiddenFor(m => m.ContractDZ.ID)
                    @Html.LabelFor(m => m.Contract.ContractName)@Html.HiddenFor(m => m.ContractDZ.ContractID, new { @class = "text" })<span
                        id="ContractName_project3" style="color: Red;"></span>
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractDZ.DZMoney)@Html.EditorFor(m => m.ContractDZ.DZMoney)
                </td>
            </tr>
            <tr>
                <td colspan="2">@Html.LabelFor(m => m.ContractDZ.Remark)@Html.TextAreaFor(m => m.ContractDZ.Remark)
                </td>
            </tr>
        </table>
    }
</div>*@


<div id="PayForm" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform">
            <tr>
                <td colspan="2">@Html.TextBoxFor(m => m.ContractPay.ID, new { @class = "text", style = "display:none" })
                    @Html.LabelFor(m => m.Contract.ContractName)@Html.TextBoxFor(m => m.ContractPay.ContractName, new { @class = "text", @ReadOnly = true })
                    @Html.HiddenFor(m => m.ContractPay.ContractID, new { @class = "text" })
                    
                    @Html.HiddenFor(m => m.ContractPay.ContractNo, new { @class = "text" })
                    <span id="ContractName_project2" style="color: Red;"></span>
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.PayDate)@Html.EditorFor(m => m.ContractPay.PayDate)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.PayType)@Html.DicEditorFor(m => m.ContractPay.PayType, DicEnum.ContractPayType)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.PayMoney)@Html.TextBoxFor(m => m.ContractPay.PayMoney, new { @class = "text" })
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.OtherAccountMan)@Html.TextBoxFor(m => m.ContractPay.OtherAccountMan, new { @class = "text" })
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.OtherTel)@Html.TextBoxFor(m => m.ContractPay.OtherTel, new { @class = "text" })
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ContractPay.Manager)@Html.TextBoxFor(m => m.ContractPay.Manager, new { @class = "text" })
                    @*@Html.AutoComplete("Manager", "ManagerName", "Combo", "User", "ID", "TrueName")*@
                </td>
            </tr>
            <tr>
                <td colspan="2">@Html.LabelFor(m => m.ContractPay.Remark)@Html.TextAreaFor(m => m.ContractPay.Remark, new { @class = "text" })
                </td>
            </tr>
        </table>
    }
</div>
<div id="ConfirmForm" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform">
            <tr>
                <td>@Html.TextBoxFor(m => m.Contract.ID, new { @class = "text", style = "display:none" })
                    @Html.LabelFor(m => m.Contract.ContractName) <span id="ContractName_project1" style="color: Red;">
                    </span>
                </td>
            </tr>
            <tr>
                <td>
                    <span style="color: Red;">请确保结算前已填写好混凝土价格</span>
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Contract.FootDate)@Html.EditorFor(m => m.Contract.FootDate)
                </td>
            </tr>
        </table>
    }
</div>

@*授信额度设置*@
<div id="CreditForm" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform">
            <tr>
                <td colspan="2">@Html.TextBoxFor(m => m.Contract.ID, new { @class = "text", style = "display:none" })
                    @Html.LabelFor(m => m.Contract.ContractName)
                    <span id="C_ContractName" style="color: Red;"></span>
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Contract.CreditMoney)@Html.EditorFor(m => m.Contract.CreditMoney)
                </td>
            </tr>
        </table>
    }
</div>

@*销售发票表单*@
<div id="divInvoiceForm" class="mvcform" style="display:none;">
     @using (Html.BeginForm())
     {
     @Html.ValidationSummary()
     <table class="mvcform">
        <tr style="display:none">
            <td>@Html.LabelFor(m => m.ContractInvoice.ID)@Html.TextBoxFor(m => m.ContractInvoice.ID)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.ContractID)@Html.TextBoxFor(m => m.ContractInvoice.ContractID, new { readOnly = true })</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.ContractInvoiceNo)@Html.TextBoxFor(m => m.ContractInvoice.ContractInvoiceNo)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.InvoiceMoney)@Html.EditorFor(m => m.ContractInvoice.InvoiceMoney)</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.TaxMoney)@Html.EditorFor(m => m.ContractInvoice.TaxMoney)</td>
        </tr> 
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.InvoiceDate)@Html.EditorFor(m => m.ContractInvoice.InvoiceDate, "DateTime", new { defaultValue = @DateTime.Now.ToString("yyyy-MM-dd") })</td>
        </tr>
        <tr>
            <td>@Html.LabelFor(m => m.ContractInvoice.Manager)@Html.TextBoxFor(m => m.ContractInvoice.Manager)</td>
        </tr>
     </table>   
     }
</div>
