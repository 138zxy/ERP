@*人员信息查看*@

@model ZLERP.Model.User
@section HeaderSection{
    <script src="@Url.Content("~/Scripts/Views/ProjectUsers.js")" type="text/javascript" language="javascript"> </script>
    <script type="text/javascript">
        $(function () {
            userIndexInit({
                storeUrl: '@Url.Action("Find","User")',
                getUserFuncsUrl: '@Url.Action("GetUserProject","ProjectUsers")',
                sysFuncTreeUrl: '@Url.Action("GetZtreeData_Project", "ProjectUsers")',
                copyPowerUrl: '@Url.Action("CopyPower")',
                currentUser: '@User.UserID()',
                getUserInfoUrl: '@Url.Action("Get")'
            });
        });

        $("input[name='ProjectSearch']").keypress(function (e) {
            if (e.keyCode == 13) {
                $("#btn_ProjectSearch").trigger("click");
            }
        });
        function searchNode(treeId) {
            var condition = '';
            var level = 2;
            var _zTree = $.fn.zTree.getZTreeObj(treeId);
            condition = $("input[name='ProjectSearch']").val();
            level = 1;
            var nodes = $.fn.zTree.getZTreeObj(treeId).getNodesByParam('level', level);
            $.each(nodes, function (index, node) {
                if (node.name.indexOf(condition) != -1) {
                    $('#' + node.tId).css("display", "block");
                }
                else {
                    $('#' + node.tId).css("display", "none");
                }
            });
        }
        
    </script>
}
<div id="My-FormDiv" style="display: none;">
    @using (Html.BeginForm())
    {
        @Html.ValidationSummary()
        <table class="mvcform" style="width: 100%">
            <tr>
                <td>@Html.LabelFor(m => m.ID)@Html.EditorFor(m => m.ID)
                </td>
                <td>@Html.LabelFor(m => m.DepartmentID)@Html.DropDownTreeFor(m => m.DepartmentID, "FindTree","Department")
                </td>
                <td>@Html.LabelFor(m => m.TrueName)@Html.EditorFor(m => m.TrueName)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.UserType)@Html.DicEditorFor(m => m.UserType, DicEnum.UserType, "")
                </td>
                <td>@Html.LabelFor(m => m.Team)@Html.DicEditorFor(m => m.Team, DicEnum.PlanClass, "")
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.CommAddr)@Html.EditorFor(m => m.CommAddr)
                </td>
                <td>@Html.LabelFor(m => m.NationAddr)@Html.EditorFor(m => m.NationAddr)
                </td>
                <td>@Html.LabelFor(m => m.IDCard)@Html.EditorFor(m => m.IDCard)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.PostCode)@Html.EditorFor(m => m.PostCode)
                </td>
                <td>@Html.LabelFor(m => m.BloodType)@Html.EditorFor(m => m.BloodType)
                </td>
                <td>@Html.LabelFor(m => m.Sex)@Html.DicEditorFor(m => m.Sex, DicEnum.Gender)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.IsMarried)@Html.CheckBoxFor(m => m.IsMarried)
                </td>
                <td>@Html.LabelFor(m => m.MaxEducate)@Html.EditorFor(m => m.MaxEducate)
                </td>
                <td>@Html.LabelFor(m => m.BankID)@Html.EditorFor(m => m.BankID)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Nation)@Html.EditorFor(m => m.Nation)
                </td>
                <td>@Html.LabelFor(m => m.Birthday)@Html.EditorFor(m => m.Birthday)
                </td>
                <td>@Html.LabelFor(m => m.DigitSign)@Html.EditorFor(m => m.DigitSign)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.DriverIdentity)@Html.EditorFor(m => m.DriverIdentity)
                </td>
                <td>@Html.LabelFor(m => m.Email)@Html.EditorFor(m => m.Email)
                </td>
                <td>@Html.LabelFor(m => m.Tel)@Html.EditorFor(m => m.Tel)
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Mobile)@Html.EditorFor(m => m.Mobile)
                </td>
                <td>@Html.LabelFor(m => m.ManagerID)@Html.AutoComplete("ManagerID", "ManageName", "Combo", "User", "ID", "TrueName")
                </td>
                <td>@Html.LabelFor(m => m.IsUsed)@Html.CheckBoxFor(m => m.IsUsed, new { Checked = true })
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.ValidFrom)@Html.EditorFor(m => m.ValidFrom)
                </td>
                <td>@Html.LabelFor(m => m.ValidTo)@Html.EditorFor(m => m.ValidTo)
                </td>
                <td>@Html.LabelFor(m => m.IsVisited)@Html.CheckBoxFor(m => m.IsVisited)
                </td>
            </tr>
            <tr>
                <td colspan="3">@Html.LabelFor(m => m.Remark)@Html.TextAreaFor(m => m.Remark, new { style = "width:80%" })
                </td>
            </tr>
           
        </table>

    }
</div>


@*页面布局*@
<div style="overflow: scroll;float: left; width: 26%">
  <div style="margin-top:1px">
        @Html.TextBox("ProjectSearch","" ,new { style = "width:120px;margin-left:10px;margin-right:10px"  })
        @Html.Button("查找", "id='btn_ProjectSearch' title='查找工地' class='icon refresh' onclick=\"searchNode('projects')\"")
  </div>
  
  <hr />
  <div id="projects" class="ztree">
  </div>

</div>
<!-- 右边Grid -->
<div id="My-JqGrid" style="float: right; width: 74%">
</div>